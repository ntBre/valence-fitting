digraph {
    compound=true

    // programs have diamond nodes
    "initial.py" [shape=record]
    download_opt [label="download_opt.py", shape=record]
    download_td [label="download_td.py", shape=record]
    filters [label="filters.py", shape=record]
    filter_opt [label="filter-opt.py" , shape=record]
    filter_td [label="filter-td.py"  , shape=record]
    ff_opt [label="fast-filter", shape=record]
    ff_td [label="fast-filter", shape=record]
    ff_opt_sage [label="fast-filter", shape=record]
    ff_td_sage [label="fast-filter", shape=record]
    combine_opt [label="combine.py", shape=record]
    combine_td [label="combine.py", shape=record]
    curate_opt [label="curate_dataset.py", shape=record]
    curate_td [label="curate_dataset.py", shape=record]

    "initial.py" -> "initial.offxml"

    filters -> { filter_opt, filter_td }

    download_opt -> "core-opt.json"
    { "core-opt.json", filter_opt } -> ff_opt
    ff_opt -> "filtered-core-opt.json"

    download_td -> "core-td.json"
    { "core-td.json", filter_td } -> ff_td
    ff_td -> "filtered-core-td.json"

    { "sage-opt.json", filter_opt } -> ff_opt_sage
    ff_opt_sage -> "filtered-sage-opt.json"

    { "sage-td.json", filter_td } -> ff_td_sage
    ff_td_sage -> "filtered-sage-td.json"

    // OPT_SET

    { "filtered-core-opt.json" } -> curate_opt -> {
    "pavan-opt-training-set.json" }

    // TD_SET

    { "filtered-core-td.json" } -> curate_td -> { "pavan-td-training-set.json" }

    // COMBINED DEPS

    { "pavan-opt-training-set.json", "filtered-sage-opt.json" } -> combine_opt

    { "pavan-td-training-set.json", "filtered-sage-td.json" } -> combine_td

    combine_opt -> { "combined-opt.json", "combined-opt-smirks.json" }

    combine_td -> { "combined-td.json", "combined-td-smirks.json" }

}
